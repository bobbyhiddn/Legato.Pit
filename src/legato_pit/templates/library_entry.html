{% extends "base.html" %}

{% block title %}{{ entry.title }} - {{ app_name }}{% endblock %}

{% block content %}
<div class="entry-container">
    <nav class="breadcrumb">
        <a href="{{ url_for('library.index') }}">Library</a>
        <span class="separator">/</span>
        {% if entry.category %}
        <a href="{{ url_for('library.view_category', category=entry.category) }}">{{ entry.category }}</a>
        <span class="separator">/</span>
        {% endif %}
        <span class="current">{{ entry.title }}</span>
    </nav>

    <article class="entry-article">
        <header class="entry-header">
            <h1>{{ entry.title }}</h1>
            <div class="entry-meta">
                {% if entry.category %}
                <span class="entry-category badge">{{ entry.category }}</span>
                {% endif %}
                <span class="entry-date">{{ entry.created_at[:10] }}</span>
            </div>
        </header>

        <details class="entry-metadata">
            <summary>Metadata</summary>
            <dl class="metadata-list">
                <dt>Entry ID</dt>
                <dd><code>{{ entry.entry_id }}</code></dd>
                {% if entry.category %}
                <dt>Category</dt>
                <dd>{{ entry.category }}</dd>
                {% endif %}
                {% if entry.file_path %}
                <dt>File Path</dt>
                <dd><code>{{ entry.file_path }}</code></dd>
                {% endif %}
                <dt>Created</dt>
                <dd>{{ entry.created_at }}</dd>
                {% if entry.updated_at and entry.updated_at != entry.created_at %}
                <dt>Updated</dt>
                <dd>{{ entry.updated_at }}</dd>
                {% endif %}
            </dl>
        </details>

        <div class="entry-content markdown-body">
            {{ entry.content_html|safe }}
        </div>

        {% if entry.source_thread or entry.source_transcript %}
        <footer class="entry-footer">
            <h3>Source</h3>
            <dl class="source-info">
                {% if entry.source_transcript %}
                <dt>Transcript</dt>
                <dd>{{ entry.source_transcript }}</dd>
                {% endif %}
                {% if entry.source_thread %}
                <dt>Thread</dt>
                <dd>{{ entry.source_thread }}</dd>
                {% endif %}
            </dl>
        </footer>
        {% endif %}
    </article>

    <div class="entry-actions">
        <a href="{{ url_for('library.index') }}" class="btn btn-secondary">Back to Library</a>
    </div>
</div>
{% endblock %}
